<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gov Jornal - Desastres Ambientais</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #007aff;
            --secondary-color: #5856d6;
            --background: #000000;
            --surface: #1c1c1e;
            --surface-2: #2c2c2e;
            --surface-3: #3a3a3c;
            --text-primary: #ffffff;
            --text-secondary: #98989d;
            --border-color: #38383a;
            --success: #34c759;
            --warning: #ff9500;
            --danger: #ff3b30;
            --shadow: rgba(0, 0, 0, 0.3);
            --blur-bg: rgba(28, 28, 30, 0.7);
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: var(--blur-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .logo i {
            font-size: 24px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-menu a {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-menu a:hover {
            color: var(--primary-color);
        }

        .nav-actions {
            display: flex;
            gap: 15px;
        }

        .settings-btn, .profile-btn {
            background: var(--surface-2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .settings-btn:hover, .profile-btn:hover {
            background: var(--surface-3);
            transform: scale(1.05);
        }

        /* Profile Menu */
        .profile-menu {
            position: fixed;
            top: 70px;
            right: 20px;
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            min-width: 280px;
            box-shadow: 0 10px 40px var(--shadow);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 999;
        }

        .profile-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .profile-info {
            display: flex;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }

        .profile-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            overflow: hidden;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-details h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .profile-details p {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .profile-actions button {
            background: var(--primary-color);
            border: none;
            padding: 10px;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .profile-actions button:hover {
            opacity: 0.8;
            transform: scale(1.02);
        }

        /* Hero Section */
        .hero {
            margin-top: 70px;
            padding: 80px 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveBackground 20s linear infinite;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 56px;
            font-weight: 700;
            margin-bottom: 20px;
            animation: fadeInUp 0.8s ease-out;
        }

        .hero-subtitle {
            font-size: 20px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 50px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 900px;
            margin: 0 auto;
        }

        .stat-card {
            background: var(--blur-bg);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
            animation: fadeInUp 1.2s ease-out;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .stat-card i {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .stat-card h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: rgba(255,255,255,0.8);
            font-size: 14px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Video Section */
        .video-section {
            padding: 80px 20px;
            background: var(--surface);
        }

        .section-title {
            font-size: 36px;
            text-align: center;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .section-title i {
            color: var(--primary-color);
        }

        .video-container {
            max-width: 900px;
            margin: 0 auto;
            border-radius: 20px;
            overflow: hidden;
            background: var(--surface-2);
            aspect-ratio: 16/9;
        }

        .video-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        .video-placeholder i {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .admin-controls {
            background: var(--surface-2);
            padding: 30px;
            border-radius: 20px;
            margin-top: 40px;
            text-align: center;
        }

        .admin-controls h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .admin-controls input[type="file"] {
            margin: 20px 0;
            padding: 10px;
            background: var(--surface-3);
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            width: 100%;
            max-width: 400px;
        }

        /* Disasters Section */
        .disasters-section {
            padding: 80px 20px;
            background: var(--background);
        }

        .disasters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .disaster-card {
            background: var(--surface);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }

        .disaster-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.4s;
        }

        .disaster-card:hover::before {
            transform: scaleX(1);
        }

        .disaster-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px var(--shadow);
            border-color: var(--primary-color);
        }

        .disaster-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin-bottom: 20px;
            transition: all 0.4s;
        }

        .disaster-card:hover .disaster-icon {
            transform: rotateY(360deg);
        }

        .disaster-card h3 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .disaster-card > p {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .disaster-info {
            list-style: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .disaster-info li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .disaster-info i {
            color: var(--success);
        }

        /* Earth 3D Section */
        .earth-section {
            padding: 80px 20px;
            background: var(--surface);
        }

        .section-description {
            text-align: center;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 50px;
            font-size: 18px;
        }

        .earth-3d-container {
            max-width: 1000px;
            margin: 0 auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px var(--shadow);
        }

        .sketchfab-embed-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }

        .sketchfab-embed-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Gallery Section */
        .gallery-section {
            padding: 80px 20px;
            background: var(--background);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 50px;
        }

        .gallery-item {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            aspect-ratio: 4/3;
            cursor: pointer;
            transition: all 0.4s;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-placeholder {
            background: var(--surface);
            border: 2px dashed var(--border-color);
            border-radius: 20px;
            padding: 60px;
            text-align: center;
            color: var(--text-secondary);
            grid-column: 1 / -1;
        }

        .gallery-placeholder i {
            font-size: 60px;
            margin-bottom: 20px;
        }

        /* Reviews Section */
        .reviews-section {
            padding: 80px 20px;
            background: var(--surface);
        }

        .review-form {
            background: var(--surface-2);
            padding: 40px;
            border-radius: 20px;
            max-width: 700px;
            margin: 0 auto 50px;
        }

        .review-form h3 {
            margin-bottom: 25px;
            font-size: 24px;
        }

        .rating-input {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stars {
            display: flex;
            gap: 10px;
        }

        .stars i {
            font-size: 28px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s;
        }

        .stars i:hover,
        .stars i.active {
            color: var(--warning);
            transform: scale(1.2);
        }

        .review-form textarea {
            width: 100%;
            padding: 15px;
            background: var(--surface-3);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: var(--font-family);
            font-size: 15px;
            resize: vertical;
            margin-bottom: 20px;
        }

        .reviews-list {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .review-card {
            background: var(--surface-2);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
            position: relative;
        }

        .review-card:hover {
            transform: translateX(10px);
            border-color: var(--primary-color);
        }

        .review-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .review-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .review-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            overflow: hidden;
        }

        .review-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .review-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .review-info p {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .review-rating {
            display: flex;
            gap: 5px;
        }

        .review-rating i {
            color: var(--warning);
            font-size: 16px;
        }

        .review-text {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .review-actions {
            display: flex;
            gap: 10px;
        }

        .delete-review-btn {
            background: var(--danger);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .delete-review-btn:hover {
            opacity: 0.8;
        }

        .no-reviews {
            text-align: center;
            color: var(--text-secondary);
            padding: 60px;
            background: var(--surface-2);
            border-radius: 20px;
        }

        /* About Section */
        .about-section {
            padding: 80px 20px;
            background: var(--background);
        }

        .about-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .about-card {
            background: var(--surface);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.4s;
        }

        .about-card.full-width {
            grid-column: 1 / -1;
        }

        .about-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow);
        }

        .about-icon {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .about-card h3 {
            font-size: 22px;
            margin-bottom: 15px;
        }

        .about-card p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .school-badge {
            display: inline-block;
            background: var(--primary-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin: 10px 0;
        }

        .contact-info {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .contact-info p {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .contact-info i {
            color: var(--primary-color);
            width: 20px;
        }

        .credits {
            background: var(--surface);
            padding: 40px;
            border-radius: 20px;
            margin-top: 50px;
            text-align: center;
        }

        .credits h3 {
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .credits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .credits-list p {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }

        .credits-list i {
            color: var(--success);
        }

        /* Footer */
        .footer {
            background: var(--surface);
            padding: 60px 20px 30px;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-section p {
            color: var(--text-secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-section a {
            display: block;
            color: var(--text-secondary);
            text-decoration: none;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--surface);
            padding: 40px;
            border-radius: 24px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close:hover {
            background: var(--surface-2);
            color: var(--text-primary);
        }

        .auth-form h2 {
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            background: var(--surface-2);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .btn-primary {
            width: 100%;
            padding: 14px;
            background: var(--primary-color);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            width: 100%;
            padding: 14px;
            background: var(--surface-2);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-secondary:hover {
            background: var(--surface-3);
        }

        .switch-form {
            text-align: center;
            margin-top: 20px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .switch-form a {
            color: var(--primary-color);
            cursor: pointer;
            text-decoration: none;
        }

        .switch-form a:hover {
            text-decoration: underline;
        }

        /* Profile View */
        .profile-view h2 {
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-display {
            text-align: center;
            padding: 30px 0;
        }

        .profile-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            margin: 0 auto 20px;
            overflow: hidden;
            border: 4px solid var(--surface-2);
        }

        .profile-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info-display h3 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .profile-info-display p {
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 40px;
        }

        .settings-section h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .color-picker {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .color-picker input[type="color"] {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }

        .preset-colors {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .color-preset {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .color-preset:hover {
            transform: scale(1.1);
            border-color: var(--text-primary);
        }

        .rainbow-preset {
            background: linear-gradient(45deg, 
                #ff0000, #ff7f00, #ffff00, 
                #00ff00, #0000ff, #4b0082, #9400d3);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #fontSelector {
            width: 100%;
            padding: 12px;
            background: var(--surface-2);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 15px;
            cursor: pointer;
        }

        /* Rainbow Mode */
        body.rainbow-mode .hero {
            background: linear-gradient(45deg, 
                #ff0000, #ff7f00, #ffff00, 
                #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            animation: rainbowGradient 10s ease infinite;
        }

        @keyframes rainbowGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body.rainbow-mode .stat-card,
        body.rainbow-mode .disaster-icon {
            background: linear-gradient(45deg, 
                #ff0000, #ff7f00, #ffff00, 
                #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            animation: rainbowGradient 10s ease infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }
            
            .hero-title {
                font-size: 36px;
            }
            
            .hero-subtitle {
                font-size: 16px;
            }
            
            .section-title {
                font-size: 28px;
            }
            
            .disasters-grid,
            .gallery-grid {
                grid-template-columns: 1fr;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--surface-3);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }

        /* Smooth Scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Notification Animation */
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-globe-americas"></i>
                <span>Gov Jornal</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home"><i class="fas fa-home"></i> Início</a></li>
                <li><a href="#disasters"><i class="fas fa-exclamation-triangle"></i> Desastres</a></li>
                <li><a href="#earth-3d"><i class="fas fa-globe"></i> Terra 3D</a></li>
                <li><a href="#gallery"><i class="fas fa-images"></i> Galeria</a></li>
                <li><a href="#reviews"><i class="fas fa-star"></i> Avaliações</a></li>
                <li><a href="#about"><i class="fas fa-info-circle"></i> Sobre</a></li>
            </ul>
            <div class="nav-actions">
                <button class="settings-btn" onclick="openSettings()">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="profile-btn" onclick="toggleProfileMenu()">
                    <i class="fas fa-user-circle"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Profile Dropdown Menu -->
    <div id="profileMenu" class="profile-menu">
        <div class="profile-info" id="profileInfo">
            <div class="profile-avatar" id="profileAvatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="profile-details">
                <h4 id="profileName">Visitante</h4>
                <p id="profileEmail">Faça login</p>
            </div>
        </div>
        <div class="profile-actions">
            <button onclick="showLogin()" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> Entrar
            </button>
            <button onclick="showProfile()" id="profileBtn" style="display:none;">
                <i class="fas fa-user"></i> Perfil
            </button>
            <button onclick="logout()" id="logoutBtn" style="display:none;">
                <i class="fas fa-sign-out-alt"></i> Sair
            </button>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Desastres Ambientais</h1>
            <p class="hero-subtitle">Informações essenciais sobre fenômenos naturais e sua prevenção</p>
            <div class="hero-stats">
                <div class="stat-card">
                    <i class="fas fa-fire"></i>
                    <h3>Queimadas</h3>
                    <p>Monitoramento em tempo real</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-water"></i>
                    <h3>Enchentes</h3>
                    <p>Alertas e prevenção</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-wind"></i>
                    <h3>Ciclones</h3>
                    <p>Rastreamento de furacões</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Section -->
    <section class="video-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-video"></i> Jornal de Desastres Ambientais
            </h2>
            <div class="video-container" id="videoContainer">
                <div class="video-placeholder">
                    <i class="fas fa-play-circle"></i>
                    <p>Vídeo será carregado aqui</p>
                </div>
            </div>
            <div class="admin-controls" id="adminControls" style="display:none;">
                <h3><i class="fas fa-shield-alt"></i> Controles do Administrador</h3>
                <input type="file" id="videoUpload" accept="video/*">
                <button onclick="uploadVideo()" class="btn-primary">
                    <i class="fas fa-upload"></i> Atualizar Vídeo
                </button>
            </div>
        </div>
    </section>

    <!-- Disasters Section -->
    <section id="disasters" class="disasters-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-exclamation-triangle"></i> Tipos de Desastres
            </h2>
            <div class="disasters-grid">
                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-fire-alt"></i>
                    </div>
                    <h3>Queimadas</h3>
                    <p>Incêndios florestais causados por ação humana ou natural, resultando em destruição de ecossistemas e emissão de gases tóxicos.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Principais causas: seca e ação humana</li>
                        <li><i class="fas fa-check"></i> Impacto: perda de biodiversidade</li>
                        <li><i class="fas fa-check"></i> Prevenção: educação ambiental</li>
                    </ul>
                </div>

                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-tree"></i>
                    </div>
                    <h3>Desmatamento</h3>
                    <p>Remoção de áreas florestais para agricultura, pecuária ou urbanização, causando desequilíbrio ecológico e mudanças climáticas.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Causa: expansão agropecuária</li>
                        <li><i class="fas fa-check"></i> Efeito: erosão do solo</li>
                        <li><i class="fas fa-check"></i> Solução: reflorestamento</li>
                    </ul>
                </div>

                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-water"></i>
                    </div>
                    <h3>Enchentes e Inundações</h3>
                    <p>Acúmulo excessivo de água causado por chuvas intensas, transbordamento de rios ou falta de infraestrutura de drenagem adequada.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Causa: chuvas torrenciais</li>
                        <li><i class="fas fa-check"></i> Risco: doenças e destruição</li>
                        <li><i class="fas fa-check"></i> Prevenção: obras de drenagem</li>
                    </ul>
                </div>

                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-mountain"></i>
                    </div>
                    <h3>Deslizamentos</h3>
                    <p>Movimentação de terra e rochas em encostas causada por chuvas, desmatamento ou construções irregulares em áreas de risco.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Causa: chuvas e desmatamento</li>
                        <li><i class="fas fa-check"></i> Perigo: soterramento</li>
                        <li><i class="fas fa-check"></i> Prevenção: monitoramento de encostas</li>
                    </ul>
                </div>

                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-wind"></i>
                    </div>
                    <h3>Ciclones e Furacões</h3>
                    <p>Sistemas de baixa pressão com ventos intensos que causam destruição massiva, tempestades e ondas gigantes em áreas costeiras.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Origem: águas oceânicas quentes</li>
                        <li><i class="fas fa-check"></i> Impacto: ventos acima de 120 km/h</li>
                        <li><i class="fas fa-check"></i> Alerta: sistemas de monitoramento</li>
                    </ul>
                </div>

                <div class="disaster-card">
                    <div class="disaster-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Tempestades Severas</h3>
                    <p>Fenômenos meteorológicos com raios, trovões, granizo e ventos fortes que podem causar danos a estruturas e risco à vida.</p>
                    <ul class="disaster-info">
                        <li><i class="fas fa-check"></i> Risco: raios e granizo</li>
                        <li><i class="fas fa-check"></i> Danos: estruturas e lavouras</li>
                        <li><i class="fas fa-check"></i> Proteção: para-raios</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 3D Earth Section -->
    <section id="earth-3d" class="earth-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-globe"></i> Planeta Terra em 3D
            </h2>
            <p class="section-description">Explore nosso planeta de forma interativa e visualize as regiões mais afetadas por desastres ambientais.</p>
            <div class="earth-3d-container">
                <div class="sketchfab-embed-wrapper">
                    <iframe title="Планета Земля. Planeet Aarde. 行星地球." frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share src="https://sketchfab.com/models/1dbdb56dd730412cb7e23f772b3794e5/embed?autostart=1&preload=1&transparent=1"></iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="gallery-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-images"></i> Galeria de Imagens
            </h2>
            <div class="gallery-grid" id="galleryGrid">
                <div class="gallery-placeholder">
                    <i class="fas fa-image"></i>
                    <p>Imagens serão carregadas aqui</p>
                </div>
            </div>
            <div class="admin-controls" id="galleryAdminControls" style="display:none;">
                <h3><i class="fas fa-shield-alt"></i> Adicionar Imagens</h3>
                <input type="file" id="imageUpload" accept="image/*" multiple>
                <button onclick="uploadImages()" class="btn-primary">
                    <i class="fas fa-upload"></i> Adicionar à Galeria
                </button>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section id="reviews" class="reviews-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-star"></i> Avaliações
            </h2>
            <p class="section-description">Compartilhe sua opinião sobre o site e ajude-nos a melhorar!</p>
            
            <div class="review-form" id="reviewForm">
                <h3>Deixe sua avaliação</h3>
                <div class="rating-input">
                    <span>Sua nota:</span>
                    <div class="stars" id="starRating">
                        <i class="far fa-star" data-rating="1"></i>
                        <i class="far fa-star" data-rating="2"></i>
                        <i class="far fa-star" data-rating="3"></i>
                        <i class="far fa-star" data-rating="4"></i>
                        <i class="far fa-star" data-rating="5"></i>
                    </div>
                </div>
                <textarea id="reviewText" placeholder="Escreva sua opinião sobre o site..." rows="4"></textarea>
                <button onclick="submitReview()" class="btn-primary">
                    <i class="fas fa-paper-plane"></i> Enviar Avaliação
                </button>
            </div>

            <div class="reviews-list" id="reviewsList">
                <p class="no-reviews">Nenhuma avaliação ainda. Seja o primeiro!</p>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i> Sobre o Projeto
            </h2>
            
            <div class="about-content">
                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Desenvolvedor</h3>
                    <p><strong>Karty Willy</strong></p>
                    <p>Estudante apaixonado por tecnologia e meio ambiente. Este projeto foi desenvolvido com o objetivo de conscientizar sobre desastres ambientais e suas consequências para o planeta.</p>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> kartywillytdc@gmail.com</p>
                    </div>
                </div>

                <div class="about-card">
                    <div class="about-icon">
                        <i class="fas fa-school"></i>
                    </div>
                    <h3>Instituição de Ensino</h3>
                    <p><strong>Colégio Estadual São Francisco de Assis</strong></p>
                    <p class="school-badge">SEED CESFA</p>
                    <div class="contact-info">
                        <p><i class="fas fa-envelope"></i> Email da Diretora: <span id="directorEmail">[A definir]</span></p>
                        <p><i class="fas fa-phone"></i> Telefone: <span id="schoolPhone">[A definir]</span></p>
                    </div>
                </div>

                <div class="about-card full-width">
                    <div class="about-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <h3>Objetivo do Projeto</h3>
                    <p>Este site foi desenvolvido como projeto escolar com o intuito de informar e educar a população sobre os principais desastres ambientais que afetam nosso planeta. Através de uma interface moderna e intuitiva, buscamos fornecer informações confiáveis e atualizadas sobre fenômenos naturais, suas causas, consequências e medidas de prevenção.</p>
                </div>
            </div>

            <div class="credits">
                <h3><i class="fas fa-code"></i> Créditos Técnicos</h3>
                <div class="credits-list">
                    <p><i class="fas fa-check-circle"></i> Frontend: HTML5, CSS3, JavaScript</p>
                    <p><i class="fas fa-check-circle"></i> Backend: Firebase Authentication & Database</p>
                    <p><i class="fas fa-check-circle"></i> Modelo 3D: Sketchfab by dima051983</p>
                    <p><i class="fas fa-check-circle"></i> Ícones: Font Awesome</p>
                    <p><i class="fas fa-check-circle"></i> Design: Inspirado em iOS da Apple</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-globe-americas"></i> Gov Jornal</h4>
                    <p>Informação e conscientização sobre desastres ambientais</p>
                </div>
                <div class="footer-section">
                    <h4>Contato</h4>
                    <p><i class="fas fa-envelope"></i> kartywillytdc@gmail.com</p>
                    <p><i class="fas fa-school"></i> SEED CESFA</p>
                </div>
                <div class="footer-section">
                    <h4>Links Rápidos</h4>
                    <a href="#home">Início</a>
                    <a href="#disasters">Desastres</a>
                    <a href="#reviews">Avaliações</a>
                    <a href="#about">Sobre</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Gov Jornal - Desenvolvido por Karty Willy para SEED CESFA</p>
            </div>
        </div>
    </footer>

    <!-- Login/Register Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAuthModal()">&times;</span>
            
            <!-- Login Form -->
            <div id="loginFormContainer" class="auth-form">
                <h2><i class="fas fa-sign-in-alt"></i> Entrar</h2>
                <form onsubmit="return handleLogin(event)">
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Senha</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Entrar
                    </button>
                </form>
                <p class="switch-form">Não tem conta? <a onclick="showRegister()">Registre-se</a></p>
            </div>

            <!-- Register Form -->
            <div id="registerFormContainer" class="auth-form" style="display:none;">
                <h2><i class="fas fa-user-plus"></i> Registrar</h2>
                <form onsubmit="return handleRegister(event)">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Nome Completo</label>
                        <input type="text" id="registerFullName" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-user-tag"></i> Apelido</label>
                        <input type="text" id="registerNickname" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Senha</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-image"></i> Foto de Perfil</label>
                        <input type="file" id="registerPhoto" accept="image/*">
                    </div>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-user-plus"></i> Registrar
                    </button>
                </form>
                <p class="switch-form">Já tem conta? <a onclick="showLogin()">Entre aqui</a></p>
            </div>

            <!-- Profile View -->
            <div id="profileViewContainer" class="profile-view" style="display:none;">
                <h2><i class="fas fa-user"></i> Meu Perfil</h2>
                <div class="profile-display">
                    <div class="profile-photo" id="profilePhotoDisplay">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info-display">
                        <h3 id="displayFullName"></h3>
                        <p id="displayNickname"></p>
                        <p id="displayEmail"></p>
                    </div>
                </div>
                <button onclick="closeAuthModal()" class="btn-primary">
                    <i class="fas fa-times"></i> Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSettings()">&times;</span>
            <h2><i class="fas fa-cog"></i> Configurações</h2>
            
            <div class="settings-section">
                <h3><i class="fas fa-palette"></i> Cor do Tema</h3>
                <div class="color-picker">
                    <input type="color" id="themeColor" value="#007aff">
                    <button onclick="applyThemeColor()" class="btn-primary">Aplicar Cor</button>
                </div>
                <div class="preset-colors">
                    <button class="color-preset" style="background: #007aff" onclick="setPresetColor('#007aff')"></button>
                    <button class="color-preset" style="background: #ff3b30" onclick="setPresetColor('#ff3b30')"></button>
                    <button class="color-preset" style="background: #34c759" onclick="setPresetColor('#34c759')"></button>
                    <button class="color-preset" style="background: #ff9500" onclick="setPresetColor('#ff9500')"></button>
                    <button class="color-preset" style="background: #af52de" onclick="setPresetColor('#af52de')"></button>
                    <button class="color-preset rainbow-preset" onclick="setRainbowMode()">🌈</button>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-font"></i> Fonte do Site</h3>
                <select id="fontSelector" onchange="applyFont()">
                    <option value="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">Padrão (SF Pro)</option>
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Courier New', monospace">Courier New</option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="'Comic Sans MS', cursive">Comic Sans</option>
                    <option value="Verdana, sans-serif">Verdana</option>
                    <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                </select>
            </div>

            <div class="settings-section">
                <button onclick="resetSettings()" class="btn-secondary">
                    <i class="fas fa-undo"></i> Restaurar Padrão
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getDatabase, ref as dbRef, set, get, push, remove, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAbtd_UifgYk71Wlp7eeXxjFssEkf1T10o",
            authDomain: "gov-jornal-desastres.firebaseapp.com",
            projectId: "gov-jornal-desastres",
            storageBucket: "gov-jornal-desastres.firebasestorage.app",
            messagingSenderId: "179260328185",
            appId: "1:179260328185:web:6d023088efbeec312d3a28",
            measurementId: "G-HJE33Q1YZ7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);
        const storage = getStorage(app);

        // Global Variables
        let currentUser = null;
        let selectedRating = 0;
        const ADMIN_EMAIL = 'kartywillytdc@gmail.com';

        // Make functions globally accessible
        window.auth = auth;
        window.database = database;
        window.storage = storage;
        window.dbRef = dbRef;
        window.storageRef = storageRef;
        window.set = set;
        window.get = get;
        window.push = push;
        window.remove = remove;
        window.onValue = onValue;
        window.uploadBytes = uploadBytes;
        window.getDownloadURL = getDownloadURL;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.onAuthStateChanged = onAuthStateChanged;
        window.signOut = signOut;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeAuth();
            loadReviews();
            loadVideo();
            loadGallery();
            initializeStarRating();
            loadSettings();
        });

        // Auth State Observer
        function initializeAuth() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    currentUser = user;
                    window.currentUser = user;
                    updateUIForLoggedInUser(user);
                    loadUserProfile(user.uid);
                } else {
                    currentUser = null;
                    window.currentUser = null;
                    updateUIForLoggedOutUser();
                }
            });
        }

        // Update UI for Logged In User
        async function updateUIForLoggedInUser(user) {
            const profileName = document.getElementById('profileName');
            const profileEmail = document.getElementById('profileEmail');
            const loginBtn = document.getElementById('loginBtn');
            const profileBtn = document.getElementById('profileBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const profileAvatar = document.getElementById('profileAvatar');

            // Get user data from database
            const userRef = dbRef(database, `users/${user.uid}`);
            const snapshot = await get(userRef);
            
            if (snapshot.exists()) {
                const userData = snapshot.val();
                profileName.textContent = userData.nickname || userData.fullName || 'Usuário';
                profileEmail.textContent = user.email;
                
                if (userData.photoURL) {
                    profileAvatar.innerHTML = `<img src="${userData.photoURL}" alt="Profile">`;
                }
            } else {
                profileName.textContent = user.email.split('@')[0];
                profileEmail.textContent = user.email;
            }

            loginBtn.style.display = 'none';
            profileBtn.style.display = 'block';
            logoutBtn.style.display = 'block';

            // Show admin controls if user is admin
            if (user.email === ADMIN_EMAIL) {
                document.getElementById('adminControls').style.display = 'block';
                document.getElementById('galleryAdminControls').style.display = 'block';
            }
        }

        // Update UI for Logged Out User
        function updateUIForLoggedOutUser() {
            document.getElementById('profileName').textContent = 'Visitante';
            document.getElementById('profileEmail').textContent = 'Faça login';
            document.getElementById('profileAvatar').innerHTML = '<i class="fas fa-user"></i>';
            document.getElementById('loginBtn').style.display = 'block';
            document.getElementById('profileBtn').style.display = 'none';
            document.getElementById('logoutBtn').style.display = 'none';
            document.getElementById('adminControls').style.display = 'none';
            document.getElementById('galleryAdminControls').style.display = 'none';
        }

        // Toggle Profile Menu
        window.toggleProfileMenu = function() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('active');
            
            // Close menu when clicking outside
            setTimeout(() => {
                document.addEventListener('click', function closeMenu(e) {
                    if (!e.target.closest('.profile-btn') && !e.target.closest('.profile-menu')) {
                        menu.classList.remove('active');
                        document.removeEventListener('click', closeMenu);
                    }
                });
            }, 100);
        }

        // Show Login Modal
        window.showLogin = function() {
            const modal = document.getElementById('authModal');
            const loginForm = document.getElementById('loginFormContainer');
            const registerForm = document.getElementById('registerFormContainer');
            const profileView = document.getElementById('profileViewContainer');
            
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
            profileView.style.display = 'none';
            modal.classList.add('active');
            document.getElementById('profileMenu').classList.remove('active');
        }

        // Show Register
        window.showRegister = function() {
            document.getElementById('loginFormContainer').style.display = 'none';
            document.getElementById('registerFormContainer').style.display = 'block';
        }

        // Show Profile
        window.showProfile = async function() {
            if (!currentUser) return;
            
            const modal = document.getElementById('authModal');
            const loginForm = document.getElementById('loginFormContainer');
            const registerForm = document.getElementById('registerFormContainer');
            const profileView = document.getElementById('profileViewContainer');
            
            // Load user data
            const userRef = dbRef(database, `users/${currentUser.uid}`);
            const snapshot = await get(userRef);
            
            if (snapshot.exists()) {
                const userData = snapshot.val();
                document.getElementById('displayFullName').textContent = userData.fullName || 'Sem nome';
                document.getElementById('displayNickname').textContent = '@' + (userData.nickname || 'sem apelido');
                document.getElementById('displayEmail').textContent = currentUser.email;
                
                const photoDisplay = document.getElementById('profilePhotoDisplay');
                if (userData.photoURL) {
                    photoDisplay.innerHTML = `<img src="${userData.photoURL}" alt="Profile">`;
                } else {
                    photoDisplay.innerHTML = '<i class="fas fa-user"></i>';
                }
            }
            
            loginForm.style.display = 'none';
            registerForm.style.display = 'none';
            profileView.style.display = 'block';
            modal.classList.add('active');
            document.getElementById('profileMenu').classList.remove('active');
        }

        // Close Auth Modal
        window.closeAuthModal = function() {
            document.getElementById('authModal').classList.remove('active');
        }

        // Handle Login
        window.handleLogin = async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                closeAuthModal();
                showNotification('Login realizado com sucesso!', 'success');
            } catch (error) {
                showNotification('Erro no login: ' + error.message, 'error');
            }
            
            return false;
        }

        // Handle Register
        window.handleRegister = async function(e) {
            e.preventDefault();
            
            const fullName = document.getElementById('registerFullName').value;
            const nickname = document.getElementById('registerNickname').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const photoFile = document.getElementById('registerPhoto').files[0];
            
            try {
                // Create user
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                let photoURL = null;
                
                // Upload photo if provided
                if (photoFile) {
                    const photoStorageRef = storageRef(storage, `profilePhotos/${user.uid}`);
                    await uploadBytes(photoStorageRef, photoFile);
                    photoURL = await getDownloadURL(photoStorageRef);
                }
                
                // Save user data to database
                await set(dbRef(database, `users/${user.uid}`), {
                    fullName: fullName,
                    nickname: nickname,
                    email: email,
                    photoURL: photoURL,
                    createdAt: new Date().toISOString()
                });
                
                closeAuthModal();
                showNotification('Registro realizado com sucesso!', 'success');
            } catch (error) {
                showNotification('Erro no registro: ' + error.message, 'error');
            }
            
            return false;
        }

        // Load User Profile
        async function loadUserProfile(uid) {
            const userRef = dbRef(database, `users/${uid}`);
            const snapshot = await get(userRef);
            
            if (snapshot.exists()) {
                const userData = snapshot.val();
                console.log('User data loaded:', userData);
            }
        }

        // Logout
        window.logout = async function() {
            try {
                await signOut(auth);
                showNotification('Logout realizado com sucesso!', 'success');
                document.getElementById('profileMenu').classList.remove('active');
            } catch (error) {
                showNotification('Erro ao fazer logout: ' + error.message, 'error');
            }
        }

        // Star Rating System
        function initializeStarRating() {
            const stars = document.querySelectorAll('#starRating i');
            
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    selectedRating = parseInt(this.dataset.rating);
                    window.selectedRating = selectedRating;
                    updateStarDisplay();
                });
                
                star.addEventListener('mouseenter', function() {
                    const rating = parseInt(this.dataset.rating);
                    highlightStars(rating);
                });
            });
            
            document.getElementById('starRating').addEventListener('mouseleave', function() {
                updateStarDisplay();
            });
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('#starRating i');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('far');
                    star.classList.add('fas');
                } else {
                    star.classList.remove('fas');
                    star.classList.add('far');
                }
            });
        }

        function updateStarDisplay() {
            highlightStars(window.selectedRating || 0);
        }

        // Submit Review
        window.submitReview = async function() {
            if (!currentUser) {
                showNotification('Você precisa estar logado para avaliar!', 'error');
                showLogin();
                return;
            }
            
            if (!window.selectedRating || window.selectedRating === 0) {
                showNotification('Por favor, selecione uma nota!', 'error');
                return;
            }
            
            const reviewText = document.getElementById('reviewText').value.trim();
            
            if (!reviewText) {
                showNotification('Por favor, escreva sua opinião!', 'error');
                return;
            }
            
            try {
                // Get user data
                const userRef = dbRef(database, `users/${currentUser.uid}`);
                const userSnapshot = await get(userRef);
                const userData = userSnapshot.val();
                
                // Create review
                const reviewsRef = dbRef(database, 'reviews');
                const newReviewRef = push(reviewsRef);
                
                await set(newReviewRef, {
                    userId: currentUser.uid,
                    userEmail: currentUser.email,
                    userName: userData?.fullName || currentUser.email.split('@')[0],
                    userNickname: userData?.nickname || '',
                    userPhoto: userData?.photoURL || null,
                    rating: window.selectedRating,
                    text: reviewText,
                    timestamp: new Date().toISOString()
                });
                
                // Reset form
                document.getElementById('reviewText').value = '';
                window.selectedRating = 0;
                updateStarDisplay();
                
                showNotification('Avaliação enviada com sucesso!', 'success');
            } catch (error) {
                showNotification('Erro ao enviar avaliação: ' + error.message, 'error');
            }
        }

        // Load Reviews
        function loadReviews() {
            const reviewsRef = dbRef(database, 'reviews');
            
            onValue(reviewsRef, (snapshot) => {
                const reviewsList = document.getElementById('reviewsList');
                reviewsList.innerHTML = '';
                
                if (!snapshot.exists()) {
                    reviewsList.innerHTML = '<p class="no-reviews">Nenhuma avaliação ainda. Seja o primeiro!</p>';
                    return;
                }
                
                const reviews = [];
                snapshot.forEach((childSnapshot) => {
                    reviews.push({
                        id: childSnapshot.key,
                        ...childSnapshot.val()
                    });
                });
                
                // Sort by timestamp (newest first)
                reviews.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                reviews.forEach(review => {
                    const reviewCard = createReviewCard(review);
                    reviewsList.appendChild(reviewCard);
                });
            });
        }

        // Create Review Card
        function createReviewCard(review) {
            const card = document.createElement('div');
            card.className = 'review-card';
            
            const stars = '<i class="fas fa-star"></i>'.repeat(review.rating) + 
                          '<i class="far fa-star"></i>'.repeat(5 - review.rating);
            
            const isAdmin = currentUser && currentUser.email === ADMIN_EMAIL;
            const deleteButton = isAdmin ? 
                `<button class="delete-review-btn" onclick="deleteReview('${review.id}')">
                    <i class="fas fa-trash"></i> Excluir
                </button>` : '';
            
            const photoHTML = review.userPhoto ? 
                `<img src="${review.userPhoto}" alt="${review.userName}">` : 
                '<i class="fas fa-user"></i>';
            
            const date = new Date(review.timestamp).toLocaleDateString('pt-BR');
            
            card.innerHTML = `
                <div class="review-header">
                    <div class="review-user">
                        <div class="review-avatar">${photoHTML}</div>
                        <div class="review-info">
                            <h4>${review.userName}</h4>
                            <p>${review.userNickname ? '@' + review.userNickname : review.userEmail} • ${date}</p>
                        </div>
                    </div>
                    <div class="review-rating">${stars}</div>
                </div>
                <p class="review-text">${review.text}</p>
                ${deleteButton ? `<div class="review-actions">${deleteButton}</div>` : ''}
            `;
            
            return card;
        }

        // Delete Review (Admin only)
        window.deleteReview = async function(reviewId) {
            if (!currentUser || currentUser.email !== ADMIN_EMAIL) {
                showNotification('Apenas administradores podem excluir avaliações!', 'error');
                return;
            }
            
            if (!confirm('Tem certeza que deseja excluir esta avaliação?')) {
                return;
            }
            
            try {
                await remove(dbRef(database, `reviews/${reviewId}`));
                showNotification('Avaliação excluída com sucesso!', 'success');
            } catch (error) {
                showNotification('Erro ao excluir avaliação: ' + error.message, 'error');
            }
        }

        // Upload Video (Admin only)
        window.uploadVideo = async function() {
            if (!currentUser || currentUser.email !== ADMIN_EMAIL) {
                showNotification('Apenas administradores podem fazer upload de vídeos!', 'error');
                return;
            }
            
            const videoFile = document.getElementById('videoUpload').files[0];
            
            if (!videoFile) {
                showNotification('Por favor, selecione um vídeo!', 'error');
                return;
            }
            
            try {
                showNotification('Uploading vídeo... Aguarde.', 'info');
                
                const videoStorageRef = storageRef(storage, `videos/journal-video`);
                await uploadBytes(videoStorageRef, videoFile);
                const videoURL = await getDownloadURL(videoStorageRef);
                
                // Save video URL to database
                await set(dbRef(database, 'content/video'), {
                    url: videoURL,
                    uploadedBy: currentUser.email,
                    uploadedAt: new Date().toISOString()
                });
                
                showNotification('Vídeo atualizado com sucesso!', 'success');
                loadVideo();
            } catch (error) {
                showNotification('Erro ao fazer upload do vídeo: ' + error.message, 'error');
            }
        }

        // Load Video
        function loadVideo() {
            const videoRef = dbRef(database, 'content/video');
            
            onValue(videoRef, (snapshot) => {
                const videoContainer = document.getElementById('videoContainer');
                
                if (snapshot.exists()) {
                    const videoData = snapshot.val();
                    videoContainer.innerHTML = `
                        <video controls style="width: 100%; border-radius: 20px;">
                            <source src="${videoData.url}" type="video/mp4">
                            Seu navegador não suporta o elemento de vídeo.
                        </video>
                    `;
                }
            });
        }

        // Upload Images (Admin only)
        window.uploadImages = async function() {
            if (!currentUser || currentUser.email !== ADMIN_EMAIL) {
                showNotification('Apenas administradores podem fazer upload de imagens!', 'error');
                return;
            }
            
            const imageFiles = document.getElementById('imageUpload').files;
            
            if (imageFiles.length === 0) {
                showNotification('Por favor, selecione pelo menos uma imagem!', 'error');
                return;
            }
            
            try {
                showNotification('Uploading imagens... Aguarde.', 'info');
                
                for (let i = 0; i < imageFiles.length; i++) {
                    const file = imageFiles[i];
                    const imageStorageRef = storageRef(storage, `gallery/${Date.now()}_${file.name}`);
                    await uploadBytes(imageStorageRef, file);
                    const imageURL = await getDownloadURL(imageStorageRef);
                    
                    // Save image URL to database
                    const galleryRef = dbRef(database, 'content/gallery');
                    const newImageRef = push(galleryRef);
                    await set(newImageRef, {
                        url: imageURL,
                        uploadedBy: currentUser.email,
                        uploadedAt: new Date().toISOString()
                    });
                }
                
                showNotification('Imagens adicionadas com sucesso!', 'success');
                document.getElementById('imageUpload').value = '';
            } catch (error) {
                showNotification('Erro ao fazer upload das imagens: ' + error.message, 'error');
            }
        }

        // Load Gallery
        function loadGallery() {
            const galleryRef = dbRef(database, 'content/gallery');
            
            onValue(galleryRef, (snapshot) => {
                const galleryGrid = document.getElementById('galleryGrid');
                galleryGrid.innerHTML = '';
                
                if (!snapshot.exists()) {
                    galleryGrid.innerHTML = `
                        <div class="gallery-placeholder">
                            <i class="fas fa-image"></i>
                            <p>Nenhuma imagem na galeria ainda</p>
                        </div>
                    `;
                    return;
                }
                
                snapshot.forEach((childSnapshot) => {
                    const imageData = childSnapshot.val();
                    const imageItem = document.createElement('div');
                    imageItem.className = 'gallery-item';
                    imageItem.innerHTML = `<img src="${imageData.url}" alt="Galeria">`;
                    imageItem.onclick = () => openImageModal(imageData.url);
                    galleryGrid.appendChild(imageItem);
                });
            });
        }

        // Open Image Modal
        window.openImageModal = function(imageUrl) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 90%; max-height: 90vh; padding: 0; background: transparent;">
                    <span class="close" onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 20px; right: 20px; background: var(--surface); z-index: 10;">&times;</span>
                    <img src="${imageUrl}" style="width: 100%; height: auto; border-radius: 20px;">
                </div>
            `;
            document.body.appendChild(modal);
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Settings Modal
        window.openSettings = function() {
            document.getElementById('settingsModal').classList.add('active');
        }

        window.closeSettings = function() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        // Apply Theme Color
        window.applyThemeColor = function() {
            const color = document.getElementById('themeColor').value;
            document.documentElement.style.setProperty('--primary-color', color);
            localStorage.setItem('themeColor', color);
            showNotification('Cor do tema aplicada!', 'success');
        }

        window.setPresetColor = function(color) {
            document.getElementById('themeColor').value = color;
            applyThemeColor();
        }

        window.setRainbowMode = function() {
            document.body.classList.toggle('rainbow-mode');
            const isRainbow = document.body.classList.contains('rainbow-mode');
            localStorage.setItem('rainbowMode', isRainbow);
            showNotification(isRainbow ? 'Modo arco-íris ativado! 🌈' : 'Modo arco-íris desativado', 'success');
        }

        // Apply Font
        window.applyFont = function() {
            const font = document.getElementById('fontSelector').value;
            document.documentElement.style.setProperty('--font-family', font);
            localStorage.setItem('fontFamily', font);
            showNotification('Fonte aplicada!', 'success');
        }

        // Reset Settings
        window.resetSettings = function() {
            if (!confirm('Tem certeza que deseja restaurar as configurações padrão?')) {
                return;
            }
            
            localStorage.removeItem('themeColor');
            localStorage.removeItem('fontFamily');
            localStorage.removeItem('rainbowMode');
            
            document.documentElement.style.setProperty('--primary-color', '#007aff');
            document.documentElement.style.setProperty('--font-family', "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif");
            document.body.classList.remove('rainbow-mode');
            document.getElementById('themeColor').value = '#007aff';
            document.getElementById('fontSelector').value = "-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif";
            
            showNotification('Configurações restauradas!', 'success');
        }

        // Load Settings
        function loadSettings() {
            const savedColor = localStorage.getItem('themeColor');
            const savedFont = localStorage.getItem('fontFamily');
            const savedRainbow = localStorage.getItem('rainbowMode');
            
            if (savedColor) {
                document.documentElement.style.setProperty('--primary-color', savedColor);
                document.getElementById('themeColor').value = savedColor;
            }
            
            if (savedFont) {
                document.documentElement.style.setProperty('--font-family', savedFont);
                document.getElementById('fontSelector').value = savedFont;
            }
            
            if (savedRainbow === 'true') {
                document.body.classList.add('rainbow-mode');
            }
        }

        // Show Notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 90px;
                right: 20px;
                background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--primary-color)'};
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                font-weight: 500;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        window.showNotification = showNotification;
    </script>
</body>
</html>
